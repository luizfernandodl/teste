<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Opera√ß√£o Caixa Preta</title>
  <style>
    :root{ --accent:#21d07a; --accent-2:#00a86b; --bg-overlay: rgba(0,0,0,.55);
      --card: rgba(10,15,18,.75); --text:#e7f6ef; --muted:#a9c7b9; --error:#ff6b6b; --ok:#5be37b; --shadow: 0 10px 30px rgba(0,0,0,.35); }
    *{box-sizing:border-box} html,body{height:100%}
    body{ margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif; color:var(--text); background:#0b1d1a; overflow:hidden; }
    .bg{ position:fixed; inset:0; z-index:-2; background:#000 url('assets/bg.jpg') center/cover no-repeat fixed; filter:saturate(1.05) contrast(1.05); }
    .bg::after{content:""; position:absolute; inset:0; background:var(--bg-overlay)}
    .wrap{ height:100%; display:grid; grid-template-rows:auto 1fr auto; }
    header{ padding:18px 22px; display:flex; align-items:center; gap:14px; }
    header .badge{background:rgba(0,0,0,.45); padding:6px 10px; border:1px solid rgba(255,255,255,.1); border-radius:999px; font-size:.85rem; color:var(--muted)}
    header h1{ font-size:1.25rem; margin:0; letter-spacing:.3px; text-shadow:0 3px 12px rgba(0,0,0,.5); }
    .grid{ display:grid; grid-template-columns: repeat(5, minmax(200px,1fr)); gap:16px; padding:10px 22px 22px; height:100%; align-content:start; overflow:auto; }
    .card{ background:var(--card); backdrop-filter: blur(6px); border:1px solid rgba(255,255,255,.08); border-radius:16px; box-shadow:var(--shadow); display:flex; flex-direction:column; padding:16px; min-height:230px; }
    .card h2{ font-size:1rem; font-weight:600; margin:0 0 8px; color:var(--muted); }
    .lock-illustration{ height:74px; display:flex; align-items:center; justify-content:center; margin:2px 0 8px; opacity:.95 }
    .muted{ color:var(--muted); font-size:.9rem } .row{ display:flex; gap:10px; align-items:center; margin-top:auto }
    input[type='text']{ flex:1; padding:12px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.15); background: rgba(2,8,10,.6); color:var(--text); font-size:1rem; outline:none }
    input::placeholder{ color:#c9ded5aa }
    button{ padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.15); background:linear-gradient(180deg,var(--accent),var(--accent-2)); color:#062315; font-weight:700; letter-spacing:.4px; cursor:pointer; transition:.2s transform ease, .2s filter ease; box-shadow:0 8px 14px rgba(0,0,0,.25) }
    button:hover{ transform:translateY(-1px) } button:disabled{ filter:grayscale(1) brightness(.8); cursor:not-allowed }
    .status{ margin-top:10px; min-height:22px; font-size:.9rem } .ok{ color:var(--ok) } .err{ color:var(--error) }
    footer{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 22px; }
    .progress{ display:flex; gap:8px; align-items:center } .dot{ width:14px; height:14px; border-radius:50%; border:2px solid #72f1b3aa; background:transparent; box-shadow:0 0 0 2px rgba(0,0,0,.25) inset } .dot.on{ background:var(--accent) }
    .reset{ background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,.18) }
    @media (max-width:1100px){ .grid{ grid-template-columns: repeat(2, minmax(240px,1fr)); } }
    @media (max-width:640px){ .grid{ grid-template-columns: 1fr; } body{overflow:auto} }
    .help { position: fixed; right: 14px; bottom: 84px; background: rgba(0,0,0,.6); border:1px solid rgba(255,255,255,.12); color: var(--muted); padding:8px 12px; border-radius:12px; font-size:.85rem }
    @media (max-width:640px){ .help{ left:14px; right:auto; bottom:14px; } }
    .modal{ position:fixed; inset:0; display:none; place-items:center; backdrop-filter: blur(3px); } .modal.show{ display:grid }
    .modal .box{ max-width:720px; margin:20px; background:rgba(4,12,10,.85); border:1px solid rgba(255,255,255,.12); border-radius:20px; padding:28px; text-align:center; box-shadow:var(--shadow) }
    .modal h3{ margin:0 0 8px; font-size:1.6rem } .modal p{ margin:0 0 16px; color:var(--muted) }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="wrap">
    <header><span class="badge">Jogo Sequencial</span><h1>Opera√ß√£o Caixa Preta</h1></header>
    <main class="grid" id="grid"></main>
    <footer><div class="progress" id="progress" aria-live="polite" aria-label="Progresso dos cadeados"></div><div style="display:flex; gap:8px; align-items:center"><button class="reset" id="btnReset" title="Reiniciar o jogo">Reiniciar</button></div></footer>
  </div>
  <div class="help">Dica: as senhas n√£o diferenciam mai√∫sculas/min√∫sculas.</div>
  <div class="modal" id="congrats"><div class="box"><h3>Parab√©ns, voc√™s conclu√≠ram o desafio üéâ</h3><p>Todas as etapas foram desbloqueadas com sucesso.</p><button id="closeModal">Fechar</button></div></div>
  <script>
    const LOCKS=[{id:1,titulo:'Cadeado 1',senha:'GOLPE',placeholder:'Digite a senha do 1¬∫'},{id:2,titulo:'Cadeado 2',senha:'CEMCC',placeholder:'Senha do 2¬∫'},{id:3,titulo:'Cadeado 3',senha:'DESVIO',placeholder:'Senha do 3¬∫'},{id:4,titulo:'Cadeado 4',senha:'SUBORNO',placeholder:'Senha do 4¬∫'},{id:5,titulo:'Cadeado 5',senha:'212',placeholder:'Senha final (n√∫meros)'}];
    const normalize=v=>(v||'').toString().trim().toUpperCase().normalize('NFD').replace(/\p{Diacritic}/gu,'');
    const LS_KEY='cadeados-progress-v1'; const loadState=()=>{try{return JSON.parse(localStorage.getItem(LS_KEY))||{}}catch{return{}}}; const saveState=s=>localStorage.setItem(LS_KEY,JSON.stringify(s)); let state=loadState();
    const grid=document.getElementById('grid'), progress=document.getElementById('progress'), modal=document.getElementById('congrats'), closeModal=document.getElementById('closeModal');
    function lockSVG(open=false){const stroke=open?'#5be37b':'#e7f6ef';const openPath=open?'<path d="M36 24v-6a12 12 0 0 0-24 0" fill="none" stroke="'+stroke+'" stroke-width="3" stroke-linecap="round"/>':'<path d="M30 18v-2a12 12 0 0 0-24 0v8" fill="none" stroke="'+stroke+'" stroke-width="3" stroke-linecap="round"/>';return `<svg width="80" height="80" viewBox="0 0 48 48" aria-hidden="true" role="img">${openPath}<rect x="6" y="18" width="36" height="26" rx="4" ry="4" fill="none" stroke="${stroke}" stroke-width="3"/><circle cx="24" cy="32" r="3" fill="${stroke}" /></svg>`;}
    function render(){grid.innerHTML='';progress.innerHTML='';const openedCount=LOCKS.filter(l=>state[l.id]).length;
      LOCKS.forEach((lock,idx)=>{const opened=!!state[lock.id]; const active=idx===openedCount; const card=document.createElement('section'); card.className='card'; card.dataset.lock=lock.id;
        card.innerHTML=`<h2>${lock.titulo}</h2><div class="lock-illustration">${lockSVG(opened)}</div><p class="muted">${opened?'Aberto com sucesso!':(active?'Ativo: digite a senha para abrir.':'Bloqueado at√© abrir o anterior.')}</p><div class="row"><input ${opened||!active?'disabled':''} type="text" inputmode="text" autocomplete="off" placeholder="${lock.placeholder}" aria-label="${lock.titulo} - campo de senha" /><button ${opened||!active?'disabled':''}>Abrir</button></div><div class="status" aria-live="polite"></div>`;
        const input=card.querySelector('input'), btn=card.querySelector('button'), status=card.querySelector('.status');
        function tryOpen(){const val=normalize(input.value); if(!val){status.innerHTML='<span class="err">Digite a senha.</span>';return;} if(val===normalize(lock.senha)){state[lock.id]=True;};}
        function tryOpen(){const val=normalize(input.value); if(!val){status.innerHTML='<span class="err">Digite a senha.</span>';return;} if(val===normalize(lock.senha)){state[lock.id]=true; saveState(state); status.innerHTML='<span class="ok">Cadeado aberto!</span>'; setTimeout(()=>render(),300);} else {status.innerHTML='<span class="err">Senha incorreta.</span>';}} 
        btn&&btn.addEventListener('click',tryOpen); input&&input.addEventListener('keydown',e=>{if(e.key==='Enter') tryOpen();}); grid.appendChild(card);
      });
      LOCKS.forEach(l=>{const dot=document.createElement('div'); dot.className='dot'+(state[l.id]?' on':''); progress.appendChild(dot);});
      if(LOCKS.every(l=>state[l.id])) modal.classList.add('show'); else modal.classList.remove('show');
    }
    document.getElementById('btnReset').addEventListener('click',()=>{state={}; saveState(state); render();}); closeModal.addEventListener('click',()=>modal.classList.remove('show')); render();
  </script>
</body>
</html>
